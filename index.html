<!DOCTYPE html>
<html lang="id">

<head>
  <meta name="2f3d90fe06ff263f17941e8393daf5b976951901" content="2f3d90fe06ff263f17941e8393daf5b976951901" />
  <meta name="referrer" content="no-referrer-when-downgrade" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BKP IND - Koleksi Video BKP Terbaru</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1050785283670276"
    crossorigin="anonymous"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
  <script>
      (function (bmkvhx) {
        var d = document,
          s = d.createElement('script'),
          l = d.scripts[d.scripts.length - 1];
        s.settings = bmkvhx || {};
        s.src = "\/\/beneficial-shape.com\/boX\/VDs.dWGdl\/0qYGWbci\/QeQmP9Bu\/ZbUFlUktPjTSY_2DN_Ttkk5bNED\/EGt-NtjuYS1xOGTZkb0\/MXgW";
        s.async = true;
        s.referrerPolicy = 'no-referrer-when-downgrade';
        l.parentNode.insertBefore(s, l);
      })({})
  </script>
  <style>
    /* line-clamp-2 (bila plugin tak ada) */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex flex-col transition-colors duration-300">
  <!-- NAVBAR -->
  <nav class="bg-blue-600 dark:bg-blue-800 text-white shadow-lg sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-3">
      <div class="flex items-center justify-between gap-4">
        <a href="/" class="flex items-center gap-3 shrink-0">
          <img src="logo.jpg" alt="Logo" class="w-10 h-10 rounded-full">
          <span class="hidden sm:inline font-semibold">BKP IND</span>
        </a>

        <div class="flex items-center gap-3 w-full sm:w-auto">
          <form id="searchForm" class="flex w-full sm:w-auto">
            <input id="searchInput" type="text" placeholder="Cari video..." class="px-3 py-2 rounded-l-lg text-gray-700 dark:text-gray-200 dark:bg-gray-700
                     focus:outline-none w-full sm:w-56">
            <button type="submit"
              class="bg-blue-800 dark:bg-blue-900 hover:bg-blue-900 px-4 py-2 rounded-r-lg shrink-0">üîç</button>
          </form>
          <button id="darkToggle" class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200
                   px-3 py-2 rounded-lg shadow transition shrink-0">üåô</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- KONTEN -->
  <main class="flex-grow max-w-6xl mx-auto px-4 py-6 w-full">
    <div id="video-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>

    <!-- NAVIGASI HALAMAN -->
    <div class="flex justify-center items-center mt-8 space-x-2">
      <button id="prevPage"
        class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded disabled:bg-gray-400 disabled:cursor-not-allowed">‚óÄ
        Prev</button>

      <form id="pageForm" class="flex items-center space-x-2">
        <label for="pageInput" class="text-gray-700 dark:text-gray-300">Page:</label>
        <input id="pageInput" type="number" min="1"
          class="w-16 px-2 py-1 rounded border dark:bg-gray-700 dark:text-gray-200">
        <button class="px-4 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded">Go</button>
      </form>

      <span id="pageInfo" class="text-gray-700 dark:text-gray-300 text-sm"></span>

      <button id="nextPage"
        class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:bg-gray-400 disabled:cursor-not-allowed">Next
        ‚ñ∂</button>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-gray-800 dark:bg-gray-950 text-gray-300 text-center py-4 mt-6">
    <p>¬© 2025 BKP IND.</p>
  </footer>

  <!-- MONETISASI (opsional) -->
  <script type='text/javascript'
    src='//pl27616949.revenuecpmgate.com/99/ac/c4/99acc473b53e337bf85e5a490ed3d440.js'></script>

  <script>
    /* ---------- CONFIG ---------- */
    const baseUrl = "https://www.eporner.com/api/v2/video/search/";
    const perPage = 12;
    const container = document.getElementById("video-list");
    const pageInfo = document.getElementById("pageInfo");

    /* ---------- STATE ---------- */
    const urlParams = new URLSearchParams(location.search);
    let currentPage = Math.max(1, parseInt(urlParams.get("page")) || 1);
    let currentQuery = urlParams.get("query")?.trim() || "indo";

    /* ---------- HELPERS ---------- */
    const escapeHTML = str => String(str).replace(/[&<>"']/g, c => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#039;" }[c]));

    function buildURL(page, query) {
      const sp = new URLSearchParams({
        thumbsize: "big",
        order: "top-weekly",
        gay: "1",
        lq: "1",
        format: "json",
        query: query,
        per_page: perPage,
        page: page
      });
      return `${baseUrl}?${sp.toString()}`;
    }

    /* ---------- RENDER ---------- */
    async function loadVideos(page = 1, query = currentQuery) {
      try {
        const res = await fetch(buildURL(page, query));
        if (!res.ok) throw new Error(res.status);
        const data = await res.json();

        container.innerHTML = "";
        data.videos.forEach(v => {
          const bigThumb = v.thumbs?.find(t => t.size === "big")?.src || "";
          const card = document.createElement("div");
          card.className = "bg-white dark:bg-gray-800 rounded-xl shadow hover:shadow-lg transition overflow-hidden group";
          card.innerHTML = `
            <div class="relative">
              <a href="#" class="video-link"
                data-embed="embed.html#${encodeURIComponent(v.embed)}"
                data-ad="https://www.revenuecpmgate.com/vsxr5fx8?key=6d167ba92c0ceefeb8225ac38630945b">
                <img src="${bigThumb}" loading="lazy" class="w-full h-32 object-cover rounded-lg">
              </a>
              <span class="absolute bottom-1 right-1 bg-black/70 text-white text-xs px-1 rounded">
                ${escapeHTML(v.length_min)}
              </span>
            </div>
            <div class="p-3">
              <h3 class="font-semibold text-sm text-gray-800 dark:text-gray-200 line-clamp-2">
                ${escapeHTML(v.title)}
              </h3>
              <div class="flex gap-2 text-xs text-gray-600 dark:text-gray-400 mt-1">
                <span>üëÅ ${escapeHTML(v.views)}</span>
                <span>‚≠ê ${escapeHTML(v.rate)}%</span>
              </div>
              <p class="text-xs text-gray-400 mt-1">Added: ${escapeHTML(v.added)}</p>
            </div>`;
          container.appendChild(card);
        });

        currentPage = page;
        currentQuery = query;

        document.getElementById("pageInput").value = page;
        pageInfo.textContent = `Page ${page} of ${data.total_pages}`;
        document.getElementById("prevPage").disabled = page <= 1;
        document.getElementById("nextPage").disabled = page >= data.total_pages;

        history.replaceState({}, "", `?query=${encodeURIComponent(query)}&page=${page}`);
      } catch (err) {
        console.error("Gagal fetch video:", err);
        container.innerHTML = `<p class="col-span-full text-center text-red-600">Gagal memuat data.</p>`;
      }
    }

    /* ---------- EVENTS ---------- */
    document.getElementById("searchForm").addEventListener("submit", e => {
      e.preventDefault();
      const q = document.getElementById("searchInput").value.trim();
      if (q) loadVideos(1, q);
    });

    document.getElementById("pageForm").addEventListener("submit", e => {
      e.preventDefault();
      const p = Math.max(1, parseInt(document.getElementById("pageInput").value) || 1);
      loadVideos(p, currentQuery);
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    document.getElementById("prevPage").addEventListener("click", () => {
      if (currentPage > 1) loadVideos(currentPage - 1, currentQuery);
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    document.getElementById("nextPage").addEventListener("click", () => {
      loadVideos(currentPage + 1, currentQuery);
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    /* ---------- DARK MODE ---------- */
    const darkToggle = document.getElementById("darkToggle");
    const html = document.documentElement;

    function setTheme(dark) {
      html.classList.toggle("dark", dark);
      darkToggle.textContent = dark ? "‚òÄÔ∏è" : "üåô";
      localStorage.theme = dark ? "dark" : "light";
    }

    const preferDark = localStorage.theme === "dark" ||
      (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches);
    setTheme(preferDark);

    darkToggle.addEventListener("click", () => setTheme(!html.classList.contains("dark")));

    /* ---------- KLIK VIDEO ---------- */
    container.addEventListener("click", e => {
      const link = e.target.closest(".video-link");
      if (!link) return;
      e.preventDefault();
      window.open(link.dataset.ad, "_blank");
      setTimeout(() => {
        location.href = link.dataset.embed;
      }, 1000);
    });

    /* ---------- INIT ---------- */
    document.getElementById("searchInput").value = currentQuery;
    loadVideos(currentPage, currentQuery);
  </script>
</body>

</html>