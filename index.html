<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BKP IND - Koleksi Video BKP Terbaru</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
</head>

<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex flex-col transition-colors duration-300">

  <!-- Navbar -->
  <nav class="bg-blue-600 dark:bg-blue-800 text-white shadow-lg sticky top-0 z-50">
    <div class="max-w-6xl mx-auto flex justify-between items-center px-4 py-3">
      <!-- Logo + Judul -->
      <a href="/" class="flex items-center space-x-3">
        <img src="logo.jpg" alt="Logo" class="w-10 h-10 rounded-full">
        
      </a>

      <!-- Search + Dark mode toggle -->
      <div class="flex items-center space-x-3">
        <form id="searchForm" class="flex">
          <input id="searchInput" type="text" placeholder="Cari video..."
            class="px-3 py-2 rounded-l-lg text-gray-700 dark:text-gray-200 dark:bg-gray-700 focus:outline-none w-40 sm:w-56">
          <button class="bg-blue-800 dark:bg-blue-900 hover:bg-blue-900 px-4 py-2 rounded-r-lg">🔍</button>
        </form>

        <!-- Tombol dark mode -->
        <button id="darkToggle"
          class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-2 rounded-lg shadow transition">
          🌙
        </button>
      </div>
    </div>
  </nav>

  <!-- Konten -->
  <main class="flex-grow max-w-6xl mx-auto px-4 py-6">
    <div id="video-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>

    <!-- Navigasi Halaman -->
    <div class="flex justify-center items-center mt-8 space-x-2">
      <button id="prevPage"
        class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded disabled:bg-gray-400 disabled:cursor-not-allowed">
        ◀ Prev
      </button>

      <form id="pageForm" class="flex items-center space-x-2">
        <label for="pageInput" class="text-gray-700 dark:text-gray-300">Page:</label>
        <input id="pageInput" type="number" min="1"
          class="w-16 px-2 py-1 rounded border dark:bg-gray-700 dark:text-gray-200" />
        <button class="px-4 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded">Go</button>
      </form>

      <!-- Indikator total halaman -->
      <span id="pageInfo" class="text-gray-700 dark:text-gray-300 text-sm"></span>

      <button id="nextPage"
        class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:bg-gray-400 disabled:cursor-not-allowed">
        Next ▶
      </button>
    </div>
  </main>

  <footer class="bg-gray-800 dark:bg-gray-950 text-gray-300 text-center py-4 mt-6">
    <p>© 2025 BKP IND.</p>
  </footer>
  <script type='text/javascript'
    src='//pl27616949.revenuecpmgate.com/99/ac/c4/99acc473b53e337bf85e5a490ed3d440.js'></script>
  <script>
    // Ambil query string dari URL
    const urlParams = new URLSearchParams(window.location.search);
    let currentPage = parseInt(urlParams.get("page")) || 1;
    let currentQuery = urlParams.get("query") || "teen";
    const perPage = 12;

    const baseUrl = "https://www.eporner.com/api/v2/video/search/?thumbsize=big&order=top-weekly&gay=1&lq=1&format=json";
    const container = document.getElementById("video-list");
    const pageInfo = document.getElementById("pageInfo");

    async function loadVideos(page = 1, query = "viral") {
      try {
        const url = `${baseUrl}&query=${query}&per_page=${perPage}&page=${page}`;
        const res = await fetch(url);
        const data = await res.json();

        container.innerHTML = "";

        data.videos.forEach(video => {
          const card = document.createElement("div");
          card.className = "bg-white dark:bg-gray-800 rounded-xl shadow hover:shadow-lg transition overflow-hidden group";

          card.innerHTML = `
    <div class="relative">
      <a href="#" class="video-link" 
         data-embed="embed.html#${video.embed}" 
         data-ad="https://www.revenuecpmgate.com/vsxr5fx8?key=6d167ba92c0ceefeb8225ac38630945b">
        <iframe src="${video.embed}" allowfullscreen class="w-full h-32 rounded-lg pointer-events-none"></iframe>
      </a>
      <span class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded">
        ${video.length_min}
      </span>
    </div>
    <div class="p-3">
      <h3 class="font-semibold text-sm text-gray-800 dark:text-gray-200 line-clamp-2">
        ${video.title}
      </h3>
      <div class="flex items-center text-xs text-gray-600 dark:text-gray-400 mt-1 space-x-2">
        <span>👁️ ${video.views}</span>
        <span>⭐ ${video.rate}%</span>
      </div>
      <p class="text-xs text-gray-400">Added: ${video.added}</p>
    </div>
  `;
          container.appendChild(card);
        });

        // Update input page number
        document.getElementById("pageInput").value = currentPage;

        // Update indikator halaman
        pageInfo.textContent = `Page ${currentPage} of ${data.total_pages}`;

        // Disable prev kalau di page 1
        document.getElementById("prevPage").disabled = currentPage <= 1;

        // Disable next kalau sudah sampai akhir
        document.getElementById("nextPage").disabled = currentPage >= data.total_pages;

      } catch (err) {
        console.error("Gagal fetch video:", err);
      }
    }

    // Load video saat pertama kali
    loadVideos(currentPage, currentQuery);

    // Tombol Next Page
    document.getElementById("nextPage").addEventListener("click", () => {
      window.location.href = `?query=${currentQuery}&page=${currentPage + 1}`;
    });

    // Tombol Prev Page
    document.getElementById("prevPage").addEventListener("click", () => {
      if (currentPage > 1) {
        window.location.href = `?query=${currentQuery}&page=${currentPage - 1}`;
      }
    });

    // Input page form
    document.getElementById("pageForm").addEventListener("submit", e => {
      e.preventDefault();
      const page = parseInt(document.getElementById("pageInput").value);
      if (page >= 1) {
        window.location.href = `?query=${currentQuery}&page=${page}`;
      }
    });

    // Search form
    document.getElementById("searchForm").addEventListener("submit", e => {
      e.preventDefault();
      const query = document.getElementById("searchInput").value.trim();
      if (query) {
        window.location.href = `?query=${query}&page=1`;
      }
    });

    // Dark mode toggle
    const darkToggle = document.getElementById("darkToggle");
    const html = document.documentElement;

    if (localStorage.theme === "dark" ||
      (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      html.classList.add("dark");
      darkToggle.innerText = "☀️";
    }

    darkToggle.addEventListener("click", () => {
      html.classList.toggle("dark");
      if (html.classList.contains("dark")) {
        localStorage.theme = "dark";
        darkToggle.innerText = "☀️";
      } else {
        localStorage.theme = "light";
        darkToggle.innerText = "🌙";
      }
    });

    // Event listener klik video
    container.addEventListener("click", e => {
      const link = e.target.closest(".video-link");
      if (link) {
        e.preventDefault();
        window.open(link.dataset.ad, "_blank"); // buka iklan
        setTimeout(() => {
          window.location.href = link.dataset.embed; // buka embed setelah 1 detik
        }, 1000);
      }
    });
  </script>
</body>

</html>
